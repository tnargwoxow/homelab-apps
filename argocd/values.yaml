# Demo-ready ArgoCD Helm values
# Use only for testing (not secure!)

server:
  ingress:
    enabled: true
    ingressClassName: nginx
    hosts:
      - argocd.localtest.me
    paths:
      - /
    pathType: Prefix
    tls: []

  service:
    type: LoadBalancer

configs:
  cm:
    admin.enabled: "true"
    accounts.anonymous.enabled: "true"
    accounts.anonymous.capabilities: "read-only"
    url: "http://argocd.localtest.me"

# Redis must be enabled and reachable for repo-server to start correctly
redis:
  enabled: true
  image:
    repository: redis
    tag: "7.2"
  auth:
    enabled: false # disable password for quick test (fixes missing secret crash)
  resources:
    requests:
      cpu: 20m
      memory: 64Mi

repoServer:
  # ensures it runs as a Deployment, not a job
  replicas: 1
  autoscaling:
    enabled: false
  serviceAccount:
    create: true
  # these lines make sure it doesn't exit immediately
  extraArgs:
    - --redis
    - "argocd-redis:6379"
  resources:
    requests:
      cpu: 50m
      memory: 128Mi

controller:
  resources:
    requests:
      cpu: 50m
      memory: 128Mi

dex:
  enabled: true
  resources:
    requests:
      cpu: 20m
      memory: 64Mi
